<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>redis | 超凡魔力</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="redis redis中常见的操作合集。奇怪的是，php手册中并没有该库的说明，不过好在，php中的redis扩展，跟redis命令相差不大。另外，IDE中增加插件，可以有相关的提示。  其他文章参考：https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_43910923&#x2F;article&#x2F;details&#x2F;88693561">
<meta property="og:type" content="article">
<meta property="og:title" content="redis">
<meta property="og:url" content="https://blog.chaofml.cn/2020/06/22/redis/redis/index.html">
<meta property="og:site_name" content="超凡魔力">
<meta property="og:description" content="redis redis中常见的操作合集。奇怪的是，php手册中并没有该库的说明，不过好在，php中的redis扩展，跟redis命令相差不大。另外，IDE中增加插件，可以有相关的提示。  其他文章参考：https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_43910923&#x2F;article&#x2F;details&#x2F;88693561">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-06-22T15:43:00.000Z">
<meta property="article:modified_time" content="2023-01-20T08:15:40.118Z">
<meta property="article:author" content="chaofml">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="超凡魔力" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">超凡魔力</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.chaofml.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-redis/redis" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/22/redis/redis/" class="article-date">
  <time datetime="2020-06-22T15:43:00.000Z" itemprop="datePublished">2020-06-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      redis
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h1><blockquote>
<p>redis中常见的操作合集。奇怪的是，php手册中并没有该库的说明，不过好在，php中的redis扩展，跟redis命令相差不大。另外，IDE中增加插件，可以有相关的提示。</p>
</blockquote>
<p>其他文章参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43910923/article/details/88693561">https://blog.csdn.net/weixin_43910923/article/details/88693561</a></p>
<a id="more"></a>

<h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/redis-tutorial.html">菜鸟教程Redis</a></li>
</ul>
<h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'REDIS_HOST'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'10.19.185.19'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'REDIS_PORT'</span><span class="token punctuation">,</span> <span class="token number">7013</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'REDIS_PASS'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>\<span class="token package">Redis</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">static</span> <span class="token variable">$redis</span> <span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$redis</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token punctuation">\</span>Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">REDIS_HOST</span><span class="token punctuation">,</span> <span class="token constant">REDIS_PORT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token constant">REDIS_PASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token variable">$redis</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token function">cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="测试连通性"><a href="#测试连通性" class="headerlink" title="测试连通性"></a>测试连通性</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//检查连接状态</span>
<span class="token variable">$status</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$status</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true为连接</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="keys及通用操作"><a href="#keys及通用操作" class="headerlink" title="keys及通用操作"></a>keys及通用操作</h2><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//使用*来进行模糊查找keys 如image*，即以image开头的</span>
<span class="token variable">$keys</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$keys</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//删除key</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">del</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'myset'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="过期时间"><a href="#过期时间" class="headerlink" title="过期时间"></a>过期时间</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//单位 秒</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'helloworld'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">ttl</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'smsphoneid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h2 id="五大类型操作"><a href="#五大类型操作" class="headerlink" title="五大类型操作"></a>五大类型操作</h2><h3 id="string"><a href="#string" class="headerlink" title="string"></a>string</h3><p>实现计数功能</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">set</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">incr</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$age</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$age</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$age</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">incrBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//指定增加多少</span>
<span class="token variable">$age</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">decr</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每次减一，如果增加第二参数，等效于decrBy</span>
<span class="token variable">$age</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">decrBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//负数等于相反操作incrBy</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>存储二进制</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//直接存储图片测试</span>
<span class="token variable">$png</span> <span class="token operator">=</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'1.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">set</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'png'</span><span class="token punctuation">,</span><span class="token variable">$png</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$bin</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'1.new.png'</span><span class="token punctuation">,</span><span class="token variable">$bin</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>操作合集</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//设置键值：成功返回true，否则返回false，键值不存在则新建，否则覆盖</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">set</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'string'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//从左往右第五个字符开始替换为另一指定字符串，成功返回替换后新字符串的长度。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'string'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'1111'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">//截取字符串里指定key对应的value里的第一个到第七个字符。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">getRange</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'string'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//添加键，返回旧键值：若key不存在则创建键值，返回false</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">getSet</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'ad'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'hi man'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//一次设置多个键值对：成功返回true</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">mset</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'jet'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//一次获取多个key的值：返回一个键值对数组，其中不存在的key值为false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">mget</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//创建一个具有时间限制的键值，过期则删除，秒为单位，成功返回true</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">setex</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'jetwu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//创建一个具有时间限制的键值，过期则删除，毫秒为单位，成功返回true</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">psetex</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'jetwu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//key的值不存在时，添加key并返回true，key存在返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">setnx</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'boby'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//setnx命令的批量操作。只有在给定所有key都不存在的时候才能设置成功，只要其中一个key存在，所有key都无法设置成功。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">msetnx</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'11'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name1'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'22'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取指定key存储的字符串的长度，key不存在返回0，不为字符串返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//将指定key存储的数字值增加1。若key不存在会先初始化为0再增加1，若key存储的不是整数值则返回false。成功返回key新值。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">incr</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//给指定key存储的数字值增加指定增量值。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">incrBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//给指定key存储的数字值增加指定浮点数增量。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">incrByFloat</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//将指定key存储的数字值减一。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">decr</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//将指定key存储的数字值减去指定减量值。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">decrBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//为指定key值尾部添加字符，返回值得长度，若key不存在则创建</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">append</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'haha'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取键值：成功返回String类型键值，若key不存在或不是String类型则返回false</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//为user表中的字段赋值。成功返回1，失败返回0。若user表不存在会先创建表再赋值，若字段已存在会覆盖旧值。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hSet</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'222'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取user表中指定字段的值。若user表不存在则返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hGet</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'realname'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//查看user表的某个字段是否存在，存在返回true，否则返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hExists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'realname'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除user表的一个字段，不支持删除多个字段。成功返回1，否则返回0。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hDel</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'222'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//同时设置某个user表的多个字段值。成功返回true。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hMset</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'jet'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//同时获取某个user表的多个字段值。其中不存在的字段值为false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hMget</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取某个user表所有的字段和值。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hGetAll</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取某个user表所有字段名。user表不存在时返回空数组，key不为user表时返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hKeys</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取某个user表所有字段值。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hVals</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//为user表中不存在的字段赋值。若user表不存在则先创建，若字段已存在则不做任何操作。设置成功返回true，否则返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hSetNx</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'realname'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'jetwu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取某个user表的字段数量。若user表不存在返回0，若user不是hash表则返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hLen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//为user表中的指定字段加上指定的数值，若user表不存在则先创建，若字段不存在则先初始化值为0再进行操作，若字段值为字符串则返回false。设置成功返回字段新值。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hIncrBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//为user表中的指定字段加上指定浮点数值。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hIncrBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p>list能实现出队列、栈的功能。下面的方式，可以模拟出生产者、消费者队列。</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//生产者将数据推到队列中</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'print_records'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'12'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$len</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lLen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'print_records'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//长度</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$len</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//消费者从另外一端消费数据，pop后redis内的数据消失</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">rPop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'print_records'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>常见操作</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">/**
* List操作
* 列表操作
* 可理解为数组操作
* 插入、删除数据按照一定规律排列的
* 元素可重复
* 适用于队列
*/</span>

<span class="token comment">//在列表头部插入一个值one，当列表不存在时自动创建一个列表，key1为列表名</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"key1"</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"one"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//在列表尾部插入一个值two，当列表不存在时自动创建一个列表，key1为列表名</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">rPush</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"key1"</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"two"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//将一个插入已存在的列表头部，列表不存在时操作无效</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">rPushx</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"key1"</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除列表的第一个元素并返回列表和列表的第一个元素，当key1不存在或不是列表则返回false</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lPop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除列表的最后一个元素并返回列表和列表的最后一个元素，当key1不存在或不是列表则返回false</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">rPop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除并或取列表的第一个元素，如果没有元素则会阻塞直到等待超时</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">blPop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'asd'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除并或取列表的最后一个元素，如果没有元素则会阻塞直到等待超时</span>
<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">brPop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'asd'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//移除列表key1中最后一个元素，将其插入另一个列表asd头部，并返回这个元素。若源列表没有元素则返回false</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">rpoplpush</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'asd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//移除列表key1中最后一个元素，将其插入另一个列表asd头部，并返回这个元素。如果列表没有元素则会阻塞列表直到超时,超时返回false。</span>
<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">brpoplpush</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'asd'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回列表长度</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lLen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//通过索引 (也就是下标key) 获取列表中的元素，如果没有该索引，则返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lindex</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//通过索引修改列表中元素的值，如果没有该索引，则返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lSet</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//在列表key1中指定元素six前面或后面插入元素。若指定元素不在列表中，或列表不存在时，不执行任何操作</span>
<span class="token comment">//Redis::AFTER插入元素后面    Redis::BEFORE插入元素前面</span>
<span class="token comment">//返回值：插入成功返回插入后列表元素个数，若key1不存在返回0，若key1不是列表返回false</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lInsert</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> Redis<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">BEFORE</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'one'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//根据第三个参数（count），删除掉相对的value</span>
<span class="token comment">//count > 0 : 从表头开始向表尾搜索，移除与value相等的元素，数量为count。</span>
<span class="token comment">//count &lt; 0 : 从表尾开始向表头搜索，移除与value相等的元素，数量为count的绝对值。</span>
<span class="token comment">//count = 0 : 移除表中所有与value相等的值。</span>
<span class="token comment">//返回实际删除元素个数</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lrem</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'1'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//对一个列表进行截取，只保留指定区间 (如：下标1到10) 的元素，其他元素都删除。成功返回true。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">ltrim</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取存储的数据并输出列表下标0到5的数据</span>
<span class="token comment">// 0为开始查询的列表里的第一个元素，-1则为最后一个元素</span>
<span class="token comment">// 5代表查询5条数据，当5为-1时则查看所有数据,</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"key1"</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p>集合。集合的特点，没有重复的数据。</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">/**
 *
 * Set操作
 * 集合命令
 * 保证数据的唯一
 * 不保证顺序
 */</span>
<span class="token comment">//将一个元素加入集合，已经存在集合中的元素则忽略。若集合不存在则先创建，若key不是集合类型则返回false，若元素已存在返回0，插入成功返回1。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sAdd</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set3'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'11'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//返回集合中所有成员。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sMembers</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//判断集合里是否存在指定元素，是返回true，否则返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sismember</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回集合中元素的数量。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">scard</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//随机删除并返回集合里的一个元素。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sPop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//随机返回（n）个集合内的元素，由第二个参数决定返回多少个</span>
<span class="token comment">//如果 n 大于集合内元素的个数则返回整个集合</span>
<span class="token comment">//如果 n 是负数时随机返回 n 的绝对值，数组内的元素会重复出现</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sRandMember</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除集合中指定的一个元素，元素不存在返回0。删除成功返回1，否则返回0。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">srem</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//模糊搜索相对的元素，</span>
<span class="token comment">//参数：key，迭代器变量，匹配值，每次返回元素数量（默认为10个）</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sscan</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token variable">$it</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'s*'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//将指定一个源集合里的值移动到一个目的集合。成功返回true，失败或者源集合值不存在时返回false。</span>
<span class="token comment">//参数：源集合，目标集合，移动的元素</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sMove</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set2'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'sdf4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//以第一个集合为标准，后面的集合对比，返回差集</span>
 <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sDiff</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set2'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'set3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//参数：第一个参数为目标集合，存储缺少的值（三个集合相加，同样字段覆盖，组合成一个新的集合）返回第一个参数所增加的值的个数。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sDiffStore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set3'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回所有集合的相同值，必须所有集合都有，不存在的集合视为空集。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sInter</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set3'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//参数：第一个参数为目标集合，存储后面集合的交集</span>
<span class="token comment">//若目的集合已存在则覆盖它。返回交集元素个数，否则返回储存的交集</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sInterStore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set4'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//把所有集合合并在一起并返回</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sUnion</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set2'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//以第一个集合为目标，把后面的集合合并在一起，存储到第一个集合里面，如果已经存在则覆盖掉，并返回并集的个数</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sUnionStore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set4'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set2'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'set3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="zset"><a href="#zset" class="headerlink" title="zset"></a>zset</h3><p>有序集合。</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">/**
*
* Zset操作
* sorted set操作
* 有序集合
* sorted set 它在set的基础上增加了一个顺序属性，这一属性在修改添加元素的时候可以指定，每次指定后，zset会自动从新按新的值调整顺序
*
*/</span>
<span class="token comment">//将一个或多个元素插入到集合里面，默认从尾部开始插入</span>
<span class="token comment">//如果要在头部插入，则找一个元素，在元素后面添加一个你需要插入的元素即可</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zAdd</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted1'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'坑啊'</span><span class="token punctuation">,</span><span class="token number">98.999</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// $redis->zAdd('集合',浮点数（元素）,'key'，(插入头部的数据)，key);</span>

<span class="token comment">//返回有序集中指定区间内的成员。成员按分数值递增排序，分数值相同的则按字典序来排序。</span>
<span class="token comment">//参数：第四个参数表示是否返回各个元素的分数值，默认为false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRange</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回有序集中指定区间内的成员。成员按分数值递减排序，分数值相同的则按字典序的倒序来排序。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zReverseRange</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回有序集中指定分数区间的成员列表，按分数值递增排序</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRangeByScore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自定义返回的序集返回起始位置及条数</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRangeByScore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'limit'</span> <span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回有序集中指定分数区间的成员列表，按分数值递减排序，分数值相同的则按字典序的倒序来排序。注意，区间表示的时候大值在前，小值在后。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRevRangeByScore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//迭代有序集合中的元素。</span>
<span class="token comment">//可理解为查找指定的值，将元素修改为float类型</span>
<span class="token comment">//返回值：[元素名=>分数值,,..]</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zscan</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token variable">$it</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回指定有序集的元素数量,序集的长度。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zCard</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回有序集中指定分数区间的成员数量。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zCount</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回有序集中指定成员的分数值。若成员不存在则返回false。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zScore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'math'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回有序集中指定成员元素的大小排名，按分数值递增排序。分数值最小者排名为0。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRank</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回有序集中指定成员元素的排名，按分数值递减排序。分数值最大者排名为0。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRevRank</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除有序集中的一个或多个成员，忽略不存在的成员。返回删除的元素个数。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRem</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'chemistry'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'English'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除有序集中指定排名区间的所有成员,返回删除元素个数</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRemRangeByRank</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除有序集中指定分数值区间的所有成员，返回删除元素的个数</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zRemRangeByScore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//对有序集中指定成员的分数值增加指定增量值。若为负数则做减法，若有序集不存在则先创建，若有序集中没有对应成员则先添加，最后再操作。</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zIncrBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Chinese'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//计算给定一个或多个有序集的交集，元素相加，并将其存储到目的有序集中</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zinterstore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'zset3'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'sorted1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//计算给定一个或多个有序集的并集，元素相加，并将其存储到目的有序集中</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">zunionstore</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'zset3'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'sorted'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'sorted1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="高级操作"><a href="#高级操作" class="headerlink" title="高级操作"></a>高级操作</h2><h3 id="发布订阅模型"><a href="#发布订阅模型" class="headerlink" title="发布订阅模型"></a>发布订阅模型</h3><p>不知道为啥，不到1分钟，订阅者的脚本就挂了。使用了长连接，还是一样。建立长连接，pconnect。</p>
<p>发布、订阅的公用代码，连接redis代码如下：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">/**
 * 2020-06-22 14:32:08
 */</span>

<span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'REDIS_HOST'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'10.19.185.19'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'REDIS_PORT'</span><span class="token punctuation">,</span> <span class="token number">7013</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'REDIS_PASS'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>\<span class="token package">Redis</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">static</span> <span class="token variable">$redis</span> <span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$redis</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token punctuation">\</span>Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">REDIS_HOST</span><span class="token punctuation">,</span> <span class="token constant">REDIS_PORT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token constant">REDIS_PASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token variable">$redis</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token function">cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>订阅者</p>
<p><strong>必须要使用pconnect来建立长连接，可是为啥还是会挂</strong></p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$res</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">pconnect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//必须要使用一个长连接。</span>

<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'callback'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token variable">$instance</span><span class="token punctuation">,</span> <span class="token variable">$channelName</span><span class="token punctuation">,</span> <span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token variable">$channelName</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'=====>'</span><span class="token punctuation">,</span><span class="token variable">$message</span><span class="token punctuation">,</span><span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>发布者</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'hello'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.chaofml.cn/2020/06/22/redis/redis/" data-id="cld48zeef00fv11o0e7nrdx8g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/" rel="tag">redis</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/06/24/shell/%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8C/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          后台执行
        
      </div>
    </a>
  
  
    <a href="/2020/06/19/yewu/%E6%97%B6%E9%97%B4%E5%86%B2%E7%AA%81/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">时间冲突</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/default/">default</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/docker/%E6%B8%85%E7%90%86/">清理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python-tools/">python - tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AD%A3%E5%88%99/">正则</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AC%E8%BD%BD/">转载</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AC%E8%BD%BD/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AC%E8%BD%BD/shell/">shell</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">-shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkinsfile/" rel="tag">Jenkinsfile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K8s%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">K8s学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/" rel="tag">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/array/" rel="tag">array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/" rel="tag">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bs4/" rel="tag">bs4</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/celery/" rel="tag">celery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chmod/" rel="tag">chmod</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chown/" rel="tag">chown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/conf/" rel="tag">conf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/copy/" rel="tag">copy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csv/" rel="tag">csv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cygwin/" rel="tag">cygwin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/db/" rel="tag">db</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/default/" rel="tag">default</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/" rel="tag">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker-php/" rel="tag">docker php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker-weblogic/" rel="tag">docker weblogic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/emoji/" rel="tag">emoji</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es/" rel="tag">es</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ext/" rel="tag">ext</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/extjs/" rel="tag">extjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/for/" rel="tag">for</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gp/" rel="tag">gp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/greenplum/" rel="tag">greenplum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gzip/" rel="tag">gzip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/host/" rel="tag">host</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ingore/" rel="tag">ingore</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/install/" rel="tag">install</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/" rel="tag">iptables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/" rel="tag">json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/" rel="tag">kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ldap/" rel="tag">ldap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lua/" rel="tag">lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lxml/" rel="tag">lxml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/md5/" rel="tag">md5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openapi/" rel="tag">openapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openssl/" rel="tag">openssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/other/" rel="tag">other</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pdo/" rel="tag">pdo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pg/" rel="tag">pg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php-%E6%89%A9%E5%B1%95/" rel="tag">php 扩展</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php-%E6%8F%92%E4%BB%B6/" rel="tag">php 插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/" rel="tag">pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgre/" rel="tag">postgre</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgresql/" rel="tag">postgresql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rancher/" rel="tag">rancher</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/requests/" rel="tag">requests</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/restful-api/" rel="tag">restful api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/session/" rel="tag">session</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socat/" rel="tag">socat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/split/" rel="tag">split</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/" rel="tag">sql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite/" rel="tag">sqlite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/static/" rel="tag">static</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tar/" rel="tag">tar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/think/" rel="tag">think</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tmux/" rel="tag">tmux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/underscope/" rel="tag">underscope</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vb/" rel="tag">vb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/" rel="tag">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue3/" rel="tag">vue3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum/" rel="tag">yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%9A%E5%8A%A1/" rel="tag">业务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA/" rel="tag">个人</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%8C%BA%E8%A1%A8/" rel="tag">分区表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8C%E6%AD%A5/" rel="tag">同步</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" rel="tag">大数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E8%A3%85/" rel="tag">安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%BC%E8%88%AA/" rel="tag">导航</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%93%E5%8C%85/" rel="tag">打包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E6%9D%BF/" rel="tag">模板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A9%BA%E6%A0%BC/" rel="tag">空格</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E6%B3%95/" rel="tag">语法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AC%E8%BD%BD/" rel="tag">转载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E7%A8%8B/" rel="tag">进程</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/shell/" style="font-size: 10px;">-shell</a> <a href="/tags/Jenkinsfile/" style="font-size: 10px;">Jenkinsfile</a> <a href="/tags/K8s%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">K8s学习笔记</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/array/" style="font-size: 10px;">array</a> <a href="/tags/awk/" style="font-size: 10px;">awk</a> <a href="/tags/bs4/" style="font-size: 10px;">bs4</a> <a href="/tags/c/" style="font-size: 10px;">c</a> <a href="/tags/celery/" style="font-size: 10px;">celery</a> <a href="/tags/chmod/" style="font-size: 10px;">chmod</a> <a href="/tags/chown/" style="font-size: 10px;">chown</a> <a href="/tags/conf/" style="font-size: 10px;">conf</a> <a href="/tags/copy/" style="font-size: 10px;">copy</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/csv/" style="font-size: 12.31px;">csv</a> <a href="/tags/cygwin/" style="font-size: 10px;">cygwin</a> <a href="/tags/db/" style="font-size: 10px;">db</a> <a href="/tags/default/" style="font-size: 13.85px;">default</a> <a href="/tags/django/" style="font-size: 10px;">django</a> <a href="/tags/docker/" style="font-size: 18.46px;">docker</a> <a href="/tags/docker-php/" style="font-size: 10px;">docker php</a> <a href="/tags/docker-weblogic/" style="font-size: 10px;">docker weblogic</a> <a href="/tags/emoji/" style="font-size: 10px;">emoji</a> <a href="/tags/es/" style="font-size: 10px;">es</a> <a href="/tags/ext/" style="font-size: 10px;">ext</a> <a href="/tags/extjs/" style="font-size: 11.54px;">extjs</a> <a href="/tags/for/" style="font-size: 10.77px;">for</a> <a href="/tags/git/" style="font-size: 11.54px;">git</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/gp/" style="font-size: 10.77px;">gp</a> <a href="/tags/greenplum/" style="font-size: 11.54px;">greenplum</a> <a href="/tags/gzip/" style="font-size: 10px;">gzip</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/host/" style="font-size: 10px;">host</a> <a href="/tags/ingore/" style="font-size: 10px;">ingore</a> <a href="/tags/install/" style="font-size: 10.77px;">install</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/java/" style="font-size: 10.77px;">java</a> <a href="/tags/js/" style="font-size: 15.38px;">js</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/k8s/" style="font-size: 12.31px;">k8s</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/ldap/" style="font-size: 10px;">ldap</a> <a href="/tags/linux/" style="font-size: 12.31px;">linux</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/lxml/" style="font-size: 10px;">lxml</a> <a href="/tags/md5/" style="font-size: 10px;">md5</a> <a href="/tags/mysql/" style="font-size: 14.62px;">mysql</a> <a href="/tags/nginx/" style="font-size: 13.85px;">nginx</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/openapi/" style="font-size: 10px;">openapi</a> <a href="/tags/openssl/" style="font-size: 10px;">openssl</a> <a href="/tags/other/" style="font-size: 13.85px;">other</a> <a href="/tags/pdo/" style="font-size: 10px;">pdo</a> <a href="/tags/pg/" style="font-size: 17.69px;">pg</a> <a href="/tags/php/" style="font-size: 16.92px;">php</a> <a href="/tags/php-%E6%89%A9%E5%B1%95/" style="font-size: 10px;">php 扩展</a> <a href="/tags/php-%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">php 插件</a> <a href="/tags/pip/" style="font-size: 10.77px;">pip</a> <a href="/tags/postgre/" style="font-size: 10px;">postgre</a> <a href="/tags/postgresql/" style="font-size: 11.54px;">postgresql</a> <a href="/tags/python/" style="font-size: 19.23px;">python</a> <a href="/tags/rancher/" style="font-size: 10px;">rancher</a> <a href="/tags/redis/" style="font-size: 13.85px;">redis</a> <a href="/tags/requests/" style="font-size: 10px;">requests</a> <a href="/tags/restful-api/" style="font-size: 10.77px;">restful api</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/shell/" style="font-size: 20px;">shell</a> <a href="/tags/socat/" style="font-size: 10px;">socat</a> <a href="/tags/split/" style="font-size: 10px;">split</a> <a href="/tags/sql/" style="font-size: 16.15px;">sql</a> <a href="/tags/sqlite/" style="font-size: 10px;">sqlite</a> <a href="/tags/ssh/" style="font-size: 11.54px;">ssh</a> <a href="/tags/static/" style="font-size: 10px;">static</a> <a href="/tags/tar/" style="font-size: 10.77px;">tar</a> <a href="/tags/think/" style="font-size: 10px;">think</a> <a href="/tags/tmux/" style="font-size: 10px;">tmux</a> <a href="/tags/underscope/" style="font-size: 10px;">underscope</a> <a href="/tags/vb/" style="font-size: 10px;">vb</a> <a href="/tags/vim/" style="font-size: 10.77px;">vim</a> <a href="/tags/vue/" style="font-size: 11.54px;">vue</a> <a href="/tags/vue3/" style="font-size: 10px;">vue3</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/yum/" style="font-size: 10px;">yum</a> <a href="/tags/%E4%B8%9A%E5%8A%A1/" style="font-size: 10px;">业务</a> <a href="/tags/%E4%B8%AA%E4%BA%BA/" style="font-size: 10px;">个人</a> <a href="/tags/%E5%88%86%E5%8C%BA%E8%A1%A8/" style="font-size: 10px;">分区表</a> <a href="/tags/%E5%90%8C%E6%AD%A5/" style="font-size: 10px;">同步</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 13.08px;">大数据</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 10px;">安装</a> <a href="/tags/%E5%AF%BC%E8%88%AA/" style="font-size: 10px;">导航</a> <a href="/tags/%E6%89%93%E5%8C%85/" style="font-size: 10px;">打包</a> <a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 10px;">模板</a> <a href="/tags/%E7%A9%BA%E6%A0%BC/" style="font-size: 10px;">空格</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 10px;">编程语言</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 10px;">网络</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 10px;">语法</a> <a href="/tags/%E8%BD%AC%E8%BD%BD/" style="font-size: 19.23px;">转载</a> <a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 10px;">进程</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/01/20/pg/%E6%95%B0%E6%8D%AE%E6%8F%92%E5%85%A5%E5%88%B0%E5%88%86%E5%8C%BA/">数据插入到分区</a>
          </li>
        
          <li>
            <a href="/2022/10/09/shell/%E6%AD%A3%E5%88%99/">常用的正则表达式</a>
          </li>
        
          <li>
            <a href="/2022/09/22/other/%E8%BF%9C%E7%A8%8B%E5%8A%9E%E5%85%AC/">远程办公</a>
          </li>
        
          <li>
            <a href="/2022/09/20/apache/%E5%8E%8B%E6%B5%8B/">压测</a>
          </li>
        
          <li>
            <a href="/2022/09/14/shell/%E5%8E%8B%E7%BC%A9%E3%80%81%E8%A7%A3%E5%8E%8B/">压缩、解压</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 chaofml<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>